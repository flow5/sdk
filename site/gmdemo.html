<html manifest="cache.manifest?app=gmdemo&amp;debug=false&amp;platform=ios&amp;native=false&amp;inline=true&amp;compress=true&amp;mobile=true"> <head><style>body{margin:0;background-color:darkslategray;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center}body.f5mobile{background-color:transparent}#f5screen{margin-left:30px;margin-right:30px;overflow:hidden;position:relative;zoom:2;width:320px;height:460px}#f5screen{background-color:white}.f5mobile #f5screen,.f5mobile #f5appframe{width:100%;height:100%;background-color:transparent}#f5appframe{display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;position:relative}#f5appframe{-webkit-user-drag:none;-webkit-user-select:none}.f5mobile #f5screen{zoom:1;margin-left:0;margin-right:0}.f5container{display:-webkit-box;-webkit-box-flex:1;width:100%;height:100%;position:relative;overflow:hidden}.f5flow,.f5switcher,.f5set{display:-webkit-box;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;-webkit-box-sizing:border-box;-webkit-box-orient:vertical}#f5appframe{font-size:100px}.f5navbar{position:absolute;top:0;display:-webkit-box;width:100%;padding-left:2px;-webkit-box-align:center;-webkit-box-pack:center;background-color:grey;-webkit-box-sizing:border-box;z-index:1000;-webkit-transition:opacity .25s}.f5navbar .f5leftbutton,.f5navbar .f5rightbutton{position:absolute;top:.06em;height:.30em;padding-left:.12em;padding-right:.12em;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;border:1px solid black;background-color:white;-webkit-box-sizing:border-box;max-width:25%}.f5navbar .f5leftbutton.f5button-press,.f5navbar .f5rightbutton.f5button-press{background-color:grey}.f5navbar .f5titlecontainer{width:100%;height:100%;position:relative;overflow:hidden}.f5navbar .f5title{position:absolute;width:100%;height:100%;top:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-box-sizing:border-box;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center}.f5navbar .f5button-label,.f5navbar .f5button-label{font-size:.16em;color:black}.f5navbar .f5leftbutton{left:.06em}.f5navbar .f5rightbutton{right:.06em}.f5navbar .f5title{font-size:.16em;padding:.16em}.f5button{position:relative;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center}.f5button-container,.f5button-container .f5button-up{position:absolute;top:0;left:0;width:100%}.f5button-label{white-space:nowrap;position:relative;color:white;font-size:.12em}.f5button.f5button-up{background-color:grey}.f5button.f5button-down,.f5button.f5button-press{background-color:black}.f5tabset{width:100%;display:-webkit-box}.f5tab{display:-webkit-box;-webkit-box-flex:1.0;width:100%}.f5button{position:relative}.f5button-container,.f5button .f5button-up,.f5button .f5button-down,.f5button img{width:100%;height:100%}.f5tabset .f5button.f5button-up .f5button-label{color:white}.f5tabset .f5button.f5button-up .f5button-label{color:white}.f5tab{-webkit-box-align:center;-webkit-box-pack:center;font-family:arial}.f5closebutton{position:absolute;top:3px;right:3px;height:.20em;width:.20em;background-color:darkgrey;z-index:1000}.f5closebutton img{height:.20em;width:.20em}.f5activityspritecontainer{position:absolute;top:0;left:0;z-index:1000;height:100%;width:100%;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;pointer-events:none}.f5activityspritemask{height:25px;width:25px;overflow:hidden}.f5activitysprite{-webkit-animation-name:activitySprite;-webkit-animation-duration:1s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear;height:100px;width:75px;background-size:100% 100%}@-webkit-keyframes activitySprite{from{-webkit-transform:translate3d(0px,0px,0px)}8.33%{-webkit-transform:translate3d(0px,0px,0px)}8.34%{-webkit-transform:translate3d(-25px,0px,0px)}16.66%{-webkit-transform:translate3d(-25px,0px,0px)}16.67%{-webkit-transform:translate3d(-50px,0px,0px)}25%{-webkit-transform:translate3d(-50px,0px,0px)}25.01%{-webkit-transform:translate3d(0px,-25px,0px)}33.33%{-webkit-transform:translate3d(0px,-25px,0px)}33.34%{-webkit-transform:translate3d(-25px,-25px,0px)}41.66%{-webkit-transform:translate3d(-25px,-25px,0px)}41.67%{-webkit-transform:translate3d(-50px,-25px,0px)}50%{-webkit-transform:translate3d(-50px,-25px,0px)}50.01%{-webkit-transform:translate3d(0px,-50px,0px)}58.33%{-webkit-transform:translate3d(0px,-50px,0px)}58.34%{-webkit-transform:translate3d(-25px,-50px,0px)}66.66%{-webkit-transform:translate3d(-25px,-50px,0px)}66.67%{-webkit-transform:translate3d(-50px,-50px,0px)}75%{-webkit-transform:translate3d(-50px,-50px,0px)}75.01%{-webkit-transform:translate3d(0px,-75px,0px)}83.33%{-webkit-transform:translate3d(0px,-75px,0px)}83.34%{-webkit-transform:translate3d(-25px,-75px,0px)}91.66%{-webkit-transform:translate3d(-25px,-75px,0px)}91.67%{-webkit-transform:translate3d(-50px,-75px,0px)}99.99%{-webkit-transform:translate3d(-50px,-75px,0px)}to{-webkit-transform:translate3d(0px,0px,0px)}}.f5alert{position:absolute;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;width:100%;height:100%;-webkit-transition:opacity .2s;opacity:0}.f5alertcontainer{padding:.12em;padding-bottom:.04em;background-color:#1e2e56;-webkit-box-sizing:border-box;border-radius:.12em;border:.03em solid white;-webkit-box-shadow:inset 0 0 5px #333;display:-webkit-box;-webkit-box-pack:justify;-webkit-box-align:center;-webkit-box-orient:vertical;min-width:66%}.f5alerttitle{font-size:.14em;color:white}.f5alertmessage{font-size:.12em;font-weight:400;color:white;padding-top:1em;padding-bottom:1em}.f5alertok{-webkit-box-shadow:inset 0 0 3px #888}.f5alertok .f5button-label{font-size:.14em;font-weight:400}.f5alert .f5button.f5button-up{background-image:-webkit-gradient(linear,center bottom,center top,from(#5c6786),color-stop(0.525,#5c6786),color-stop(.555,#8a93a9),to(#8a93a9))}.f5alert .f5button.f5button-up.f5button-press{background-image:-webkit-gradient(linear,center bottom,center top,from(#49516a),color-stop(0.525,#49516a),color-stop(.555,#636979),to(#636979))}.f5menu{position:absolute;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;-webkit-box-orient:vertical;top:25%;left:10%;width:80%;height:50%;-webkit-transition:opacity .2s;background-color:grey;padding:10px;opacity:0}.f5menuitems{border:1px solid black;width:75%;-webkit-box-align:center;margin-top:.12em;margin-bottom:.12em}.f5menutitle{font-size:.16em}.f5menuitem{border-bottom:1px solid black;padding:.06em;width:100%;height:.30em;-webkit-box-sizing:border-box}.f5menuitem .f5button-label{font-size:.16em}.f5menuitem:last-child{border-bottom:0}.f5menuitem{background-color:grey;color:white}.f5menuitem.f5button-press{background-color:black;color:white}.f5switch{height:30px;width:70px;display:-webkit-box;-webkit-box-align:center;-webkit-box-shadow:inset 0 1px 2px .5px #000;overflow:hidden;border-radius:15px;-webkit-mask-box-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 70 30"><g><path d="m 15,30 40,0 c 8.2843,0 15,-6.7157 15,-15 l 0,0 c 0,-8.2843 -6.7157,-15 -15,-15 l -40,0 c -8.2843,0 -15,6.7157 -15,15 0,0 0,0 0,0 l 0,0 c 0,8.2843 6.7157,15 15,15 z"/></g></svg>')}.f5slider .f5control{height:100%;border-radius:50%;background-color:lightgrey;-webkit-box-shadow:0 0 1px 1px #666;-webkit-box-sizing:border-box;border:1px solid #FFF;background-image:-webkit-gradient(linear,center bottom,center top,from(#FFF),to(#d0d0d0));position:relative}.f5slider{height:100%;padding:1px;-webkit-box-sizing:border-box;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;position:relative}.f5slider .left,.f5slider .right{position:absolute;top:0;height:100%;width:50%;font-size:.14em;font-weight:600;display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center}.f5slider .left{background-color:rgba(0,127,234,0.75);left:0;padding-right:8px;-webkit-box-sizing:border-box;color:rgba(255,255,255,1.0);border-top-left-radius:15px;border-bottom-left-radius:15px;-webkit-box-shadow:inset 0 1px 2px .5px #444}.f5slider .right{background-color:rgba(238,238,238,0.5);right:0;padding-left:10px;-webkit-box-sizing:border-box;color:rgba(127,127,127,1.0);border-top-right-radius:15px;border-bottom-right-radius:15px;-webkit-box-shadow:inset 0 1px 2px .5px #777}.f5navcontrols{position:absolute;opacity:.5;top:0;left:0;width:100%}.f5transitions .f5button-label,.f5subflows .f5button-label{overflow:hidden;text-overflow:ellipsis;width:100%;font-size:.16em}.f5transitions,.f5subflows{border:1px solid black;width:75%;-webkit-box-align:center;margin-top:.12em;margin-bottom:.12em}.f5dotransition,.f5dosubflow{border-bottom:1px solid black;padding:.06em;width:100%;-webkit-box-sizing:border-box;height:.30em}.f5dotransition:last-child,.f5dosubflow:last-child{border-bottom:0}.f5dotransition{background-color:lightgrey}.f5dosubflow{background-color:darkslategrey}.f5dotransition.f5button-press,.f5dosubflow.f5button-press{background-color:black;color:white}#f5appframe{font-size:100px}.f5navbar{height:44px}.f5tabset{height:48px}.splash{top:-20px}.login{display:-webkit-box;-webkit-box-pack:center;-webkit-box-align:center;width:100%;height:100%}</style> <script>F5={Resources:{},flowspec:{type:"set",selection:"login",subflows:{WillBecomeActive:{method:"isLoggedIn",choices:{no:"login",yes:"home"}}},children:{login:{transitions:["home"]},home:{selection:"gifts",children:{gifts:{type:"switcher",selection:"received",children:{received:{},given:{}}}}}}},query:{app:"gmdemo",debug:"false",platform:"ios","native":"false",inline:"true",compress:"true",mobile:"true"},facebook_appid:"285965594801167"};</script> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=0"> <meta name="apple-mobile-web-app-status-bar-style" content="black"> <meta name="apple-mobile-web-app-capable" content="yes"> <link rel="apple-touch-icon" href="apps/gmdemo/images/icon.png"> <link rel="apple-touch-startup-image" href="apps/gmdemo/images/splash.png"> <meta name="viewport" content="target-densitydpi=device-dpi"> </head> <body> <div id="f5templates" style="display: none;"> <div id="templates.html"> <div id="login"> <div f5widget="Button" f5id="loginButton">Login with Facebook</div> </div> <div id="home" f5widget="NavBar"></div> </div> </div> <div id="f5scripts"> <script id="f5/f5.js">(function(){F5.mockDataHost="http://www.flow5.com/";F5.Global={};F5.Prototypes={};F5.Prototypes.FlowDelegates={};if(typeof document!=="undefined"){F5.Prototypes.Widgets={};F5.Prototypes.ViewDelegates={}}}());</script> <script id="f5/utils.js">(function(){function a(h,d,b,g,c,f){var e=new XMLHttpRequest();e.open(h,d,true);if(f){F5.forEach(f,function(j,i){e.setRequestHeader(j,i)})}e.onreadystatechange=function(j){switch(e.readyState){case e.UNSENT:break;case e.OPENED:break;case e.HEADERS_RECEIVED:break;case e.LOADING:break;case e.DONE:if(e.status===200){if(g){var i={};if(f){F5.forEach(f,function(l,k){i[l]=e.getResponseHeader(l)})}g(e.responseText,i)}}else{if(c){c(e.responseText)}}break}};setTimeout(function(){e.send(b)},0)}F5.get=function(c,e,b,d){a("GET",c,null,e,b,d)};F5.post=function(d,b,f,c,e){a("POST",d,b,f,c,e)};F5.execService=function(c,k,e){var f=F5.Services;var l,g,b;F5.forEach(c.split("."),function(m){if(f){f=f[m]}l=f.protocol||l;g=f.baseUrl||g;b=f.method||b;if(f.parameters){F5.extend(k,f.parameters)}});F5.assert(f,"No service called: "+c);var d=l+"://"+g;if(b==="GET"){if(f.query){d+="?"+f.query(k)}else{var i=[];F5.forEach(k,function(n,m){i.push(n+"="+encodeURIComponent(m))});d+="?"+i.join("&")}F5.get(d,function j(m){try{var o=JSON.parse(m);if(f.postprocess){o=f.postprocess(o)}e(o)}catch(n){console.log(n.message);e(null)}},function h(m){console.log("Error from "+d+" : "+m);e(null)})}};F5.merge=function(d,e){function b(f){return typeof f==="object"&&f.constructor===Object}function c(g,f){if(!e[g]){if(b(f)){e[g]={}}}if(b(f)){F5.assert(typeof e[g]==="object","mismatched data schema");F5.forEach(f,function(i,h){if(e[g][i]){console.log("WARNING: data field name shadowed: "+g+"."+i)}e[g][i]=h})}else{if(e[g]){console.log("WARNING: data field name shadowed: "+g)}e[g]=f}}if(d&&typeof d==="object"){F5.forEach(d,c)}};F5.getNodeData=function(c,b){var e={};F5.merge(b,e);var d=c;while(d){F5.merge(F5.Resources[d.id],e);d=d.parent}if(c){F5.merge(c.data,e)}return e};F5.assert=function(c,b){if(!c){throw new Error(b)}};F5.objectFromPrototype=function(c){function b(){}b.prototype=c;return new b()};F5.callback=function(c,b){try{c(b)}catch(d){console.log(d.message)}};F5.chainTasks=function(c,b){if(c.length){c.shift()(function(){F5.chainTasks(c,b)})}else{b()}};F5.parallelizeTasks=function(e,b){var d=e.length;if(!d){b();return}function c(){d-=1;if(!d){b()}}e.forEach(function(f){f(c)})};F5.noop=function(){};F5.sign=function(b){return b/Math.abs(b)};F5.valueFromId=function(d,c){if(c){var b=c.split(".");while(d&&typeof d==="object"&&b.length){d=d[b.shift()]}return d}else{return null}};F5.reset=function(){document.body.innerHTML="";document.body.style["background-color"]="black";localStorage.clear();setTimeout(function(){location.reload()},0)};F5.forEach=function(e,d){if(typeof NodeList!=="undefined"&&e.constructor===NodeList){var c;for(c=0;c<e.length;c+=1){d(e[c])}}else{if(e.constructor===Array){e.forEach(d)}else{var b;for(b in e){if(e.hasOwnProperty(b)){d(b,e[b])}}}}};F5.extend=function(c,b){F5.forEach(b,function(e,d){c[e]=d})}}());</script> <script id="f5/domutils.js">(function(){function b(){if(F5.isMobile()){return"touchstart"}else{return"mousedown"}}function f(){if(F5.isMobile()){return"touchend"}else{return"mouseup"}}function a(){if(F5.isMobile()){return"touchmove"}else{return"mousemove"}}var e=0;function d(k,j,h,i){if(!k.F5){k.F5={}}if(!k.F5.listeners){k.F5.listeners={}}i=i||j;F5.assert(!k.F5.listeners[i],"Already listening for: "+i+" on element with id: "+k.id);k.F5.listeners[i]=function g(l){F5.callback(h,l)};k.addEventListener(j,k.F5.listeners[i],false);e+=1}function c(i,h,g){g=g||h;if(i.F5&&i.F5.listeners&&i.F5.listeners[g]){i.removeEventListener(h,i.F5.listeners[g]);delete i.F5.listeners[g];e-=1}}F5.logEventListenerCount=function(){console.log("event listeners: "+e)};F5.removeTouchEventListenersRecursive=function(h){function g(i){F5.removeTouchStartListener(i);F5.removeTouchStopListener(i);F5.removeTouchMoveListener(i);F5.removeTapListener(i)}g(h);F5.forEach(h.querySelectorAll("*"),function(i){g(i)})};F5.addTouchStartListener=function(h,g){d(h,b(),g)};F5.removeTouchStartListener=function(g){c(g,b())};F5.addTouchStopListener=function(h,g){d(h,f(),g)};F5.removeTouchStopListener=function(g){c(g,f())};F5.addTouchMoveListener=function(h,g){d(h,a(),g)};F5.removeTouchMoveListener=function(g){c(g,a())};F5.maxClickDistance=30;F5.maxClickTime=1000;F5.addTapListener=function(h,g){d(h,b(),function(i){i.preventDefault();var j=F5.eventLocation(i);c(h,b(),"tap");d(h,f(),function(l){l.preventDefault();var n=F5.eventLocation(l);c(h,f(),"tap");var k=l.timeStamp-i.timeStamp;var m=F5.eventDistance(j,n);if(k<=F5.maxClickTime&&m<=F5.maxClickDistance){F5.callback(g,l)}F5.addTapListener(h,g)},"tap")},"tap")};F5.removeTapListener=function(g){c(g,b(),"tap")};F5.addTransitionEndListener=function(h,g){d(h,"webkitTransitionEnd",g)};F5.removeTransitionEndListener=function(g){c(g,"webkitTransitionEnd")};F5.alert=function(i,g){var h=F5.createWidget("Alert",{title:i,message:g});h.widget.present()};F5.eventLocation=function(i){var g,j;if(F5.isMobile()){if(i.touches[0]){g=i.touches[0].screenX;j=i.touches[0].screenY}else{g=i.changedTouches[0].screenX;j=i.changedTouches[0].screenY}}else{var h=window.getComputedStyle(document.getElementById("f5screen")).zoom;g=i.clientX/h;j=i.clientY/h}return{x:g,y:j}};F5.eventDistance=function(j,i){var h=i.x-j.x;var g=i.y-j.y;return Math.sqrt(h*h+g*g)};F5.modifyCSSRule=function(n,l){var m=document.styleSheets;var k;for(k=0;k<m.length;k+=1){var h=m.item(k).cssRules;if(h){var g;for(g=0;g<h.length;g+=1){var o=h.item(g);if(o&&o.selectorText){if(o.selectorText===n){var p;for(p in l){if(l.hasOwnProperty(p)){o.style[p]=l[p]}}}}}}}};F5.elementAbsolutePosition=function(h){var g=0,i=0;while(h){g+=h.offsetLeft;i+=h.offsetTop;h=h.offsetParent}return{x:g,y:i}};F5.hasClass=function(j,i){F5.assert(!i.match(" "),"className should not have a space: "+i);var h=new RegExp("^"+i+" ");var k=new RegExp(" "+i+"$");var g=new RegExp(" "+i+" ");return j.className===i||j.className.match(h)||j.className.match(g)||j.className.match(k)};F5.removeClass=function(j,i){F5.assert(!i.match(" "),"className should not have a space: "+i);if(j.className===i){j.className=""}else{var h=new RegExp("^"+i+" ");var g=new RegExp(" "+i+" ");var k=new RegExp(" "+i+"$");j.className=j.className.replace(h,"").replace(g," ").replace(k,"")}};F5.addClass=function(h,g){F5.assert(!g.match(" "),"className should not have a space: "+g);if(!F5.hasClass(h,g)){if(h.className){h.className+=" "+g}else{h.className=g}}};F5.setupScreenGeometry=function(m,g){var n=F5.query.geometry;var h;if(n){var q=n.split("x");h=document.createElement("style");var p=q[1]>480?1:2;h.innerHTML="#f5screen {width:"+q[0]+"px; height:"+q[1]+"px; zoom: "+p+";";document.head.appendChild(h)}else{if(m&&!g){var i,o;if(window.innerWidth>window.innerHeight){i=window.innerHeight;o=window.innerWidth}else{i=window.innerWidth;o=window.innerHeight}var l;if(screen.width>screen.height){l=screen.width-screen.availWidth}else{l=screen.height-screen.availHeight}var j=0;var k=0;if(window.innerHeight!==screen.availHeight){j=44;k=30}h=document.createElement("style");h.innerHTML="@media screen and (orientation: portrait)\n								{\n									.f5mobile #f5screen {\n										width:"+screen.width+"px;\n										height:"+(screen.height-(l+j))+"px;\n									}\n								}\n								@media screen and (orientation: landscape)\n								{\n									.f5mobile #f5screen {\n										width:"+screen.height+"px;\n										height:"+(screen.width-(l+k))+"px;\n									}\n								}";document.head.appendChild(h);document.addEventListener("orientationchange",function(){setTimeout(function(){window.scrollTo(0,1)},0)})}}};F5.elementOffsetGeometry=function(g){return{top:g.offsetTop,left:g.offsetLeft,width:g.offsetWidth,height:g.offsetHeight}};F5.isMobile=function(){return F5.query.mobile==="true"};F5.platform=function(){return F5.query.platform};F5.isDebug=function(){return F5.query.debug==="true"};F5.isNative=function(){return F5.query["native"]==="true"};F5.attachWidget=function(h,k,j){if(!h.getAttribute("f5widget")){h.setAttribute("f5widget",k)}F5.assert(F5.Prototypes.Widgets[k],"No widget: "+k);var i=F5.objectFromPrototype(F5.Prototypes.Widgets[k]);i.el=h;h.widget=i;var g=h.getAttribute("f5class");if(g){F5.addClass(h,g)}i.construct(j)};F5.createWidget=function(j,h,i){var g=document.createElement("div");if(i){g.setAttribute("f5id",i)}F5.attachWidget(g,j,h);return g};F5.getElementById=function(h,i){var g=h.querySelector("[f5id="+i+"]");if(!g){console.log("Did not find element with f5id="+i+" in element with id: "+h.id)}return g};F5.attachTabset=function(i,j,h){i.setAttribute("f5tabsetposition",h);F5.attachWidget(i,"Tabset",F5.getNodeData(j));F5.addClass(i.widget.tabset,j.id);i.widget.setAction(function g(k){F5.Global.flowController.doSelection(j,k)});i.widget.select(j.selection.id)};F5.parseResources=function(){function g(i){return i.indexOf(".png")!==-1||i.indexOf(".jpg")!==-1||i.indexOf(".svg")!==-1||i.indexOf("data:image")!==-1}function h(i){F5.forEach(i,function(k,j){if(typeof j==="object"){h(j)}else{if(g(j)){i[k]=F5.objectFromPrototype(F5.ImagePreloader);i[k].load(j)}}})}h(F5.Resources)}}());</script> <script id="f5/flow.js">(function(){function a(b){this.parse=function(){var f=this;function g(j,i){if(j.children&&j.children[i]){return j.children[i]}else{if(j.parent){return g(j.parent,i)}else{F5.assert(false,"Could not find name: "+i)}}}function e(n,m,i){var k={id:n,data:{},type:m.type||"flow",parent:i,viewDelegate:m.viewDelegate,spec:m,active:false};var l=F5.Prototypes.FlowDelegates[k.id];if(l){k.flowDelegate=F5.objectFromPrototype(l);k.flowDelegate.node=k}if(m.children){k.children={};F5.assert(m.selection,"Parent node must declare child selection: "+n);F5.forEach(m.children,function(q,o){var p=e(q,o,k);if(q===m.selection){k.selection=p;p.active=true}})}function j(p,o){if(p&&p.choices){p.active=false;p.type="subflow";p.node=o;F5.forEach(p.choices,function(r,q){j(q,o)})}}if(m.subflows){k.subflows={};F5.forEach(m.subflows,function(p,o){o.node=k;k.subflows[p]=o;j(o,k)})}if(k.parent){i.children[n]=k}return k}function h(i){if(i.spec.transitions){i.transitions={};F5.forEach(i.spec.transitions,function(j){var k;if(typeof j==="object"){k=j.to;i.transitions[k]={to:g(i,k),animation:j.animation}}else{k=j;i.transitions[k]={to:g(i,k)}}if(!i.transitions[k].to.transitions){h(i.transitions[k].to)}})}if(i.children){F5.forEach(i.children,function(k,j){h(j)})}}f.root=e("root",b);h(f.root);function d(i){delete i.spec;i._mark=true;F5.forEach(i,function(k,j){if(j&&typeof j==="object"&&!j._mark){d(j)}});delete i._mark}d(f.root);function c(k){function i(l){var m=[];while(l){m.push(l.id);l=l.parent}return m.reverse().join("-")}k.path=i(k);if(k.children){F5.forEach(k.children,function(m,l){c(l)})}function j(m,l){if(m&&m.choices){m.path=l+"_"+m.method;m.active=false;F5.forEach(m.choices,function(o,n){j(n,m.path)})}}if(k.subflows){F5.forEach(k.subflows,function(m,l){j(l,k.path)})}}c(this.root);f.root.active=true}}F5.Global.flow=new a(F5.flowspec)}());</script> <script id="f5/flowcontroller.js">(function(){function a(c){var f=this;c.controller=this;var h=false;var i=[];var b=[];this.addFlowObserver=function(n){b.push(n)};this.removeFlowObserver=function(n){b.splice(b.indexOf(n),1)};function g(r,q,n){F5.lifecycleEvent=r;function s(){delete F5.lifecycleEvent;n()}function p(t){if(t["node"+r]){t["node"+r](q)}}function o(t){return function(){g(r,t.selection,n)}}while(q){if(q.subflows&&q.subflows[r]){b.forEach(p);f.doSubflow(q,r,o(q));break}else{b.forEach(p);q=q.selection}}if(!q){n()}}function j(o,n){o.active=true;g("DidBecomeActive",o,n)}function k(o,n){o.active=false;g("DidBecomeInactive",o,n)}function l(o,n){g("WillBecomeActive",o,n)}function m(o,n){g("WillBecomeInactive",o,n)}function e(n){function p(){n();b.forEach(function(q){if(q.asyncOperationComplete){q.asyncOperationComplete()}})}setTimeout(function o(){F5.flushTasks(i,function(){i=[];p()})},0)}this.start=function(n){n=n||function(){console.log("start complete")};F5.parseResources();F5.Global.flow.parse();F5.Global.viewController.initialize();e(function(){b.forEach(function(o){if(o.start){o.start()}});l(c.root,function(){j(c.root,function(){e(n)})})})};function d(n){if(n.activeSubflow&&n.activeSubflow.userInput){b.forEach(function(o){if(o.completeSubflow){o.completeSubflow(n.activeSubflow)}})}delete n.activeSubflow;if(n.children){F5.forEach(n.children,function(p,o){d(o)})}}this.addWaitTask=function(n){i.push(n)};this.doSelection=function(p,q,n){F5.assert(!h,"Locked out");F5.assert(p.type==="switcher"||p.type==="set","Can only doSelection on node of types switcher or set");F5.assert(p.children[q],"No child with id: "+q);n=n||function(){};if(q===p.selection.id){n();return}h=true;var o=p.selection;d(p);m(o,function(){l(p.children[q],function(){var s=[];b.forEach(function(t){if(t.doSelection){f.addWaitTask(t.doSelection(p,q))}});e(function r(){p.selection.active=false;p.selection=p.children[q];k(o,function(){j(p.selection,function(){h=false;n()})})})})})};this.doTransition=function(p,o,v,q){F5.assert(!h,"Locked out");F5.assert(o==="back"||p.transitions,"No transitions defined for node: "+p.path);F5.assert(o==="back"||p.transitions[o],"No transition with id: "+o);v=v||{};q=q||function(){};h=true;var n;var t;if(p.transitions&&p.transitions[o]){n=p.transitions[o].to.parent}else{t=p;while(!t.back){t=t.parent}n=t.parent}F5.assert(n.type==="flow"||n.type==="set","Transition container is not a flow or set");if(o!=="back"){var s=p;while(s.parent!==n){s=s.parent}p.transitions[o].to.back=s}d(p);var u=o==="back"?t.back:p.transitions[o].to;var r=p.transitions&&p.transitions[o]?p.transitions[o].animation:null;if(v){if(o==="back"){F5.extend(u.data,v)}else{u.data=v}}m(p,function(){l(u,function(){var x=[];b.forEach(function(y){if(y.doTransition){f.addWaitTask(y.doTransition(n,p,o,u,r))}});e(function w(){var y=n.selection;k(y,function(){if(t){n.selection=t.back;delete t.back;b.forEach(function(z){if(z.release){z.release(p)}})}else{n.selection=p.transitions[o].to}j(n.selection,function(){h=false;q()})})})})})};this.getBackNode=function(n){n=n||c.root;while(n.selection){n=n.selection}while(!n.back&&n.parent){n=n.parent}if(n.back){return n}else{return null}};this.hasBack=function(){return f.getBackNode()!==null};this.doBack=function(){var n=f.getBackNode();F5.assert(n,"Cannot go back");f.doTransition(n,"back")};this.doSubflow=function(q,t,n){F5.assert(q.subflows&&q.subflows[t],"No such subflow");n=n||function(){};var s=q.subflows[t];s.completionCb=n;s.active=true;q.activeSubflow=s;var p=q.flowDelegate;var r=p?p[s.method]:null;if(!r){p=F5.Global.flow.root.flowDelegate;r=p?p[s.method]:null}if(r){r.apply(p,[function o(u){f.doSubflowChoice(q,u)}])}else{if(!s.userInput){console.log("Subflow not flagged for user input but no delegate method found: "+q.id+"-"+t);s.userInput=true}b.forEach(function(u){if(u.startSubflow){u.startSubflow(q.activeSubflow)}})}};this.doSubflowChoice=function(p,o){F5.assert(p.activeSubflow,"No active subflow");F5.assert(p.activeSubflow.choices.hasOwnProperty(o),"No such choice");if(p.activeSubflow.userInput){var n=p.activeSubflow.method+"Choice";var r=p.flowDelegate;var q=r?r[n]:null;if(!q){r=F5.Global.flow.root.flowDelegate;q=r?r[n]:null}if(q){q.apply(r,[o])}}var u=p.activeSubflow.completionCb;var v=p.activeSubflow;delete v.completionCb;v.active=false;delete p.activeSubflow;if(v.userInput){b.forEach(function(w){if(w.completeSubflow){w.completeSubflow(v)}})}var s=v.choices[o];if(s){if(typeof s==="object"){F5.assert(s.type==="subflow","A subflow choice must be a node name or another subflow");var t=s;t.completionCb=u;t.active=true;p.activeSubflow=t;b.forEach(function(w){if(w.startSubflow){w.startSubflow(p.activeSubflow)}})}else{F5.assert(typeof s==="string","A subflow choice must be a node name or another subflow");if(s){if(p.type==="flow"){u();f.doTransition(p,s)}else{if(p.type==="switcher"&&F5.lifecycleEvent!=="WillBecomeActive"){u();f.doSelection(p,s)}else{if(p.type==="set"||p.type==="switcher"){if(p.selection.id!==s){p.selection=p.children[s];F5.forEach(p.children,function(x,w){w.active=false});p.selection.active=true;b.forEach(function(w){if(w.syncSelection){w.syncSelection(p)}})}u()}}}}}}else{u()}}}F5.Global.flowController=new a(F5.Global.flow)}());</script> <script id="f5/views.js">(function(){function c(g){return{DidBecomeActive:true,DidBecomeInactive:true,WillBecomeActive:true,WillBecomeInactive:true}[g]}function e(){this.initializeView=function(k){var j=document.createElement("div");F5.addClass(j,"f5"+k.type);j.id=k.path;j.view=this;this.el=j;this.node=k;k.view=this;if(k.children){var g=document.createElement("div");F5.addClass(g,"f5container");this.el.appendChild(g);if(k.type==="switcher"||k.type==="set"){F5.forEach(k.children,function(m,l){F5.objectFromPrototype(F5.Views[l.type]).initialize(l);g.appendChild(l.view.el)})}else{F5.objectFromPrototype(F5.Views[k.selection.type]).initialize(k.selection);g.appendChild(k.selection.view.el)}}if(F5.Prototypes.ViewDelegates[k.id]){this.delegate=F5.objectFromPrototype(F5.Prototypes.ViewDelegates[k.id]);this.delegate.node=k;this.delegate.el=j}if(!this.delegate){var i=F5.loadTemplate(k);if(i){j.appendChild(i)}}if(!k.active){j.style.visibility="hidden"}if(F5.isDebug()&&!F5.isMobile()){var h=document.createElement("div");h.innerHTML=this.node.id;F5.addClass(h,"f5nodelabel");this.el.insertBefore(h,this.el.firstChild)}};this.viewWillBecomeActive=function(){if(this.delegate&&this.delegate.viewWillBecomeActive){this.delegate.viewWillBecomeActive()}};this.viewWillBecomeInactive=function(){if(this.delegate&&this.delegate.viewWillBecomeInactive){this.delegate.viewWillBecomeInactive()}};this.viewDidBecomeActive=function(){if(this.delegate&&this.delegate.viewDidBecomeActive){this.delegate.viewDidBecomeActive()}};this.viewDidBecomeInactive=function(){if(this.delegate&&this.delegate.viewDidBecomeInactive){this.delegate.viewDidBecomeInactive()}};this.getNavConfig=function(){if(this.delegate&&this.delegate.getNavConfig){return this.delegate.getNavConfig()}else{if(this.node.back){var g=this.node.back;while(g.selection){g=g.selection}return{left:{label:g.id,transition:"back"}}}else{return null}}};this.show=function(){this.el.visibility=""};this.hide=function(){this.el.visibility="hidden"}}var d=new e();function a(){this.initialize=function(j){this.initializeView(j);if(this.delegate&&this.delegate.initialize){this.delegate.initialize(this.el,this.node)}else{var i=document.createElement("div");F5.addClass(i,"f5navcontrols");this.el.appendChild(i);if(j.subflows){var h=document.createElement("div");F5.addClass(h,"f5subflows");var k=false;F5.forEach(j.subflows,function(n,m){if(!c(n)){k=true;var l=F5.createWidget("Button",{id:n},"id");F5.addClass(l,"f5dosubflow");h.appendChild(l);l.widget.setAction(function(){F5.Global.flowController.doSubflow(j,n)})}});if(k){i.appendChild(h)}}if(j.transitions){var g=document.createElement("div");F5.addClass(g,"f5transitions");i.appendChild(g);F5.forEach(j.transitions,function(n,m){var l=F5.createWidget("Button",{id:n},"id");F5.addClass(l,"f5dotransition");g.appendChild(l);l.widget.setAction(function(){F5.Global.flowController.doTransition(j,n)})})}}}}a.prototype=d;function f(){this.initialize=function(g){this.initializeView(g);F5.forEach(g.children,function(i,h){h.view.el.setAttribute("f5tab",i)});if(this.delegate&&this.delegate.initialize){this.delegate.initialize()}else{F5.attachTabset(this.el,g,"bottom")}};this.doSelection=function(g,h){if(this.delegate&&this.delegate.doSelection){this.delegate.doSelection(h)}else{g.view.el.widget.select(h)}}}f.prototype=d;function b(){this.initialize=function(g){this.initializeView(g);if(this.delegate&&this.delegate.initialize){this.delegate.initialize()}}}b.prototype=d;F5.Views={flow:new a(),switcher:new f(),set:new b()}}());</script> <script id="f5/templates.js">(function(){F5.refreshTemplate=function(a,b){F5.forEach(a.querySelectorAll("[f5widget]"),function(c){c.widget.construct(b)})};F5.loadTemplate=function(e,d){var a;var b;if(typeof e==="string"){a=e}else{b=e;a=b.id}var h=document.getElementById(a);if(!h){console.log("No template with id: "+a);return null}var i=h.cloneNode(true);i.removeAttribute("id");var g=[];if(i.hasAttribute("f5widget")){g.push(i)}F5.forEach(i.querySelectorAll("[f5widget]"),function(j){g.push(j)});var c=F5.getNodeData(b,d);F5.forEach(g,function f(j){F5.attachWidget(j,j.getAttribute("f5widget"),c)});F5.addClass(i,a);return i}}());</script> <script id="f5/viewcontroller.js">(function(){function a(c){F5.Global.flowController.addFlowObserver(this);function b(f,e){f.view["view"+e]();function d(h,i){F5.forEach(h.childNodes,function g(j){if(j.getAttribute&&j.getAttribute("f5widget")){if(j.widget["widget"+i]){j.widget["widget"+i]()}}if(!j.view){d(j,i)}})}d(f.view.el,e)}this.nodeDidBecomeActive=function(d){b(d,"DidBecomeActive")};this.nodeDidBecomeInactive=function(d){b(d,"DidBecomeInactive")};this.nodeWillBecomeInactive=function(d){b(d,"WillBecomeInactive")};this.nodeWillBecomeActive=function(d){if(!d.view){F5.objectFromPrototype(F5.Views[d.type]).initialize(d);if(d===F5.Global.flow.root){this.screenFrame.appendChild(d.view.el)}else{d.parent.view.el.getElementsByClassName("f5container")[0].appendChild(d.view.el)}}b(d,"WillBecomeActive")};this.initialize=function(){this.screenFrame=document.getElementById("f5screen")};this.start=function(){};this.doSelection=function(e,g){if(F5.Global.navigationController){F5.Global.navigationController.doSelection(e,g)}e.view.doSelection(e,g);var d=document.getElementById(e.selection.path);var f=document.getElementById(e.children[g].path);return F5.Animation.cut(e.view.el,d,f)};this.doTransition=function(d,l,e,m,i){var j=this;if(e==="back"){i=F5.Animation.inverseAnimation(d.selection.animation)}if(!i){i="pushLeft"}if(e!=="back"){m.animation=i}var n=d.view.el.getElementsByClassName("f5container")[0];var h=d.selection;var f=h.view.el;var g=m.view.el;var k=F5.Animation[i](n,f,g);return function(o){k(function(){o()})}};this.release=function(e){F5.forEach(e.view.el.querySelectorAll("[f5widget]"),function(f){if(f.widget.release){f.widget.release()}});F5.removeTouchEventListenersRecursive(e.view.el);e.view.el.parentElement.removeChild(e.view.el);function d(f){delete f.view;delete f.animation;if(f.children){F5.forEach(f.children,function(h,g){d(g)})}}d(e)};this.syncSelection=function(d){F5.forEach(d.children,function(f,e){e.view.el.style.visibility="hidden"});d.selection.view.el.style.visibility="";if(d.view.el.widget&&d.view.el.widget.select){d.view.el.widget.select(d.selection.id)}};this.startSubflow=function(e){var d={method:e.method,choices:e.choices};e.menu=F5.createWidget("Menu",d);e.menu.widget.setAction(function(f){F5.Global.flowController.doSubflowChoice(e.node,f)});e.menu.widget.present()};this.completeSubflow=function(d){d.menu.widget.dismiss()}}F5.Global.viewController=new a(F5.Global.flow)}());</script> <script id="f5/animation.js">(function(){function a(c,d,e,f){d.style["-webkit-transform"]="translate3d(0px, 0px, 0px)";e.style["-webkit-transform"]="translate3d("+f+"px, 0px, 0px)";e.style.visibility="";return function(g){function h(){d.style.visibility="hidden";d.style["-webkit-transform"]="";d.style["-webkit-transition"]="";if(F5.platform()!=="android"){e.style["-webkit-transform"]=""}e.style["-webkit-transition"]="";F5.removeTransitionEndListener(d);g()}if(F5.platform()==="android"){setTimeout(h,325)}else{F5.addTransitionEndListener(d,h)}var i="-webkit-transform ease-in .3s";d.style["-webkit-transition"]=i;e.style["-webkit-transition"]=i;d.style["-webkit-transform"]="translate3d("+-f+"px, 0px, 0px)";e.style["-webkit-transform"]="translate3d(0px, 0px, 0px)"}}function b(c,d,e){if(e<0){d.style["-webkit-transform"]="translate3d(0px, 0px, 0px)"}else{d.style["-webkit-transform"]="translate3d(0px, "+-e+"px, 0px)"}d.style.visibility="";d.style["z-index"]=1;return function(f){function g(){if(F5.platform()!=="android"){d.style["-webkit-transform"]=""}d.style["-webkit-transition"]="";if(e<0){d.style["z-index"]=""}F5.removeTransitionEndListener(d);f()}if(F5.platform()==="android"){setTimeout(g,325)}else{F5.addTransitionEndListener(d,g)}var h="-webkit-transform ease-in .3s";d.style["-webkit-transition"]=h;if(e<0){d.style["-webkit-transform"]="translate3d(0px, "+e+"px, 0px)"}else{d.style["-webkit-transform"]="translate3d(0px, 0px, 0px)"}}}F5.Animation={cut:function(c,d,e){return function(f){e.style.visibility="";d.style.visibility="hidden";setTimeout(f,0)}},fadeIn:function(c,d,e){d.style["z-index"]=0;e.style["z-index"]=1;e.style.visibility="";e.style.opacity=0;return function(f){function g(){d.style["z-index"]="";e.style["z-index"]="";e.style["-webkit-transition"]="";d.style.visibility="hidden";setTimeout(function(){d.style.opacity=""});F5.removeTransitionEndListener(e);f()}F5.addTransitionEndListener(e,g);e.style["-webkit-transition"]="opacity .25s";e.style.opacity=1}},fadeOut:function(c,d,e){d.style["z-index"]=1;e.style["z-index"]=0;e.style.visibility="";e.style.opacity=1;return function(f){function g(){d.style["z-index"]="";e.style["z-index"]="";e.style["-webkit-transition"]="";if(F5.platform()!=="android"){d.style.visibility="hidden";setTimeout(function(){d.style.opacity=""})}F5.removeTransitionEndListener(d);f()}F5.addTransitionEndListener(d,g);d.style["-webkit-transition"]="opacity .25s";d.style.opacity=0}},pushLeft:function(c,d,e){return a(c,d,e,c.offsetWidth)},pushRight:function(c,d,e){return a(c,d,e,-c.offsetWidth)},sheetDown:function(c,d,e){return b(c,e,c.offsetHeight)},sheetUp:function(c,d,e){return b(c,d,-c.offsetHeight)},inverseAnimation:function(d){var c;switch(d){case"cut":c="cut";break;case"fadeIn":c="fadeOut";break;case"fadeOut":c="fadeIn";break;case"pushRight":c="pushLeft";break;case"pushLeft":c="pushRight";break;case"sheetDown":c="sheetUp";break;case"sheetUp":c="sheetDown";break}return c}}}());</script> <script id="f5/services.js">(function(){F5.Services={foursquare:{protocol:"https",method:"GET",parameters:{v:"20111111"},venueSearch:{baseUrl:"api.foursquare.com/v2/venues/search",parameterSchema:{},responseSchema:{},postprocess:function(a){return a.response.venues}},venue:{baseUrl:"api.foursquare.com/v2/venues/",parameterSchema:{},responseSchema:{},postprocess:function(a){return a.response.venue}},categories:{baseUrl:"api.foursquare.com/v2/venues/categories",parameterSchema:{},responseSchema:{},postprocess:function(a){return a.response.categories}}}}}());</script> <script id="f5/location.js">(function(){function a(){var b;this.getCurrentLocation=function(){if(b){return b}else{return{lat:37.774484,lng:-122.420091}}};this.start=function(e){if(!navigator.geolocation){return}var d=this;var c={enableHighAccuracy:false,timeout:10000,maximumAge:0};F5.merge(e,c);this.watchId=navigator.geolocation.watchPosition(function(f){var g={lat:f.coords.latitude,lng:f.coords.longitude};if(g!==b){b=g;var h=document.createEvent("Events");h.initEvent("locationchanged");document.dispatchEvent(h)}},function(f){console.log(f)},c)};this.stop=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId)}}}F5.locationService=new a()}());</script> <script id="f5/imagepreloader.js">(function(){function a(){this.isImagePreloader=function(b){return b instanceof a};this.load=function(c){var e=this;if(c.match("data:image/")||c.match("http://")){this.url=c}else{this.url="apps/"+F5.query.app+"/"+c}var d,b,f;this.image=new Image();this.image.onload=function(){d=true;if(f){f()}};this.image.onerror=function(){console.log("Image error: "+e.url);d=true;b=true;if(f){f()}};this.image.src=this.url;F5.Global.flowController.addWaitTask(function(g){if(d){g()}else{f=g}})};this.src=function(){return this.url}}F5.ImagePreloader=new a()}());</script> <script id="f5/widgets/button.js">(function(){function a(){this.setState=function(e){var d=this;this.state=e;["up","down"].forEach(function(f){F5.removeClass(d.el,"f5button-"+f);if(d[f]){d[f].style.visibility="hidden"}});var c=e?"down":"up";F5.addClass(this.el,"f5button-"+c);if(this[c]){this[c].style.visibility=""}};this.setLabel=function(c){if(!this.label){this.label=document.createElement("div");F5.addClass(this.label,"f5button-label");this.el.appendChild(this.label)}this.label.innerText=c};this.getData=function(){return this.data};this.unsetAction=function(){F5.removeTouchEventListenersRecursive(this.el)};this.setAction=function(d){var f=this;function h(){F5.addClass(f.el,"f5button-press");if(f.press){var j=f.savedState?"down":"up";f[j].style.visibility="hidden";f.press.style.visibility=""}}function c(){F5.removeClass(f.el,"f5button-press");if(f.press){var j=f.savedState?"down":"up";f[j].style.visibility="";f.press.style.visibility="hidden"}}var g;function e(){c();f.setState(f.savedState);F5.removeTouchMoveListener(f.el,g);F5.removeTouchStopListener(f.el,e);F5.removeTouchStopListener(document.body,e)}g=function(k){k.preventDefault();k.stopPropagation();var j=F5.eventLocation(k);if(F5.eventDistance(j,f.startLoc)>F5.maxClickDistance){e()}};F5.addTouchStartListener(this.el,function i(j){j.preventDefault();f.savedState=f.state;f.startLoc=F5.eventLocation(j);h();F5.addTouchMoveListener(f.el,g);F5.addTouchStopListener(f.el,e);F5.addTouchStopListener(document.body,e)});F5.addTapListener(this.el,function(j){e();d(j)})};this.reset=function(){this.el.innerHTML="";if(this.className){F5.removeClass(this.el,this.className);delete this.className}delete this.label};this.construct=function(f){var h=this;var c;function l(p){if(!c){c=document.createElement("div");F5.addClass(c,"f5button-container");h.el.appendChild(c)}h[p]=document.createElement("div");F5.addClass(h[p],"f5button-"+p);c.appendChild(h[p])}function g(q){function p(t,s){function r(x,w,u){var v=document.createElement("img");v.src=w[u].src();h[x].appendChild(v);if(u==="middle"){v.style.display="-webkit-box";v.style["-webkit-box-flex"]=1}}F5.assert(s.left&&s.middle&&s.right,"Image must specify left, middle and right");r(t,s,"left");r(t,s,"middle");r(t,s,"right");h[t].style.display="-webkit-box"}F5.forEach(q,function(s,r){l(s);p(s,r)})}function e(p){function q(t,s){var r=document.createElement("img");r.src=s.src();h[t].appendChild(r)}F5.forEach(p,function(s,r){l(s);q(s,r)})}function o(p){l("up");l("down");var q=document.createElement("div");F5.addClass(q,"f5mask");q.style["-webkit-mask-image"]='url("'+p.src()+'")';h.up.appendChild(q);q=document.createElement("div");F5.addClass(q,"f5mask-shadow");q.style["-webkit-mask-image"]='url("'+p.src()+'")';h.down.appendChild(q);q=document.createElement("div");F5.addClass(q,"f5mask");q.style["-webkit-mask-image"]='url("'+p.src()+'")';h.down.appendChild(q)}function i(p){if(p.className){h.className=p.className;F5.addClass(h.el,p.className)}if(p.image){if(p.image.up){if(F5.ImagePreloader.isImagePreloader(p.image.up)){e(p.image)}else{g(p.image)}}}if(p.mask){o(p.mask)}if(p.label){h.setLabel(p.label)}}var k=this.el.innerText;this.el.innerHTML="";this.data=f;this.state=false;F5.addClass(h.el,"f5button-up");F5.addClass(this.el,"f5button");var m={label:k};var j=this.el.getAttribute("f5class");if(j){var n=f["."+j];if(typeof n==="string"){m.label=n}else{F5.merge(n,m)}}var d=f[this.el.getAttribute("f5id")];if(typeof d==="string"){m.label=d}else{F5.merge(d,m)}i(m)}}F5.Prototypes.Widgets.Button=new a();function b(){this.state=false;this.setAction=function(c){var d=this;F5.addTouchStartListener(this.el,function e(f){f.stopPropagation();f.preventDefault();d.setState(!d.state);c(d.state)})}}b.prototype=F5.Prototypes.Widgets.Button;F5.Prototypes.Widgets.ToggleButton=new b()}());</script> <script id="f5/widgets/statictext.js">(function(){function b(){this.construct=function(d){var e=this.el.getAttribute("f5id");var c=F5.valueFromId(d,e);if(c){this.el.innerText=c}}}F5.Prototypes.Widgets.StaticText=new b();function a(){this.construct=function(d){var e=this.el.getAttribute("f5id");var c=F5.valueFromId(d,e);if(c){this.el.innerText=c}}}F5.Prototypes.Widgets.Telephone=new a()}());</script> <script id="f5/widgets/picture.js">(function(){function a(){this.construct=function(e){this.el.innerHTML="";var f=this.el.getAttribute("f5id");var d=F5.valueFromId(e,f);if(!d){var c=this.el.getAttribute("f5class");if(c){d=e["."+c]}}if(d){var b=document.createElement("img");if(F5.ImagePreloader.isImagePreloader(d)){b.src=d.src()}else{b.src=d}this.el.appendChild(b)}}}F5.Prototypes.Widgets.Picture=new a()}());</script> <script id="f5/widgets/tabset.js">(function(){function a(){this.state=false;this.setAction=function(c){var d=this;F5.addTouchStartListener(this.el,function e(f){f.stopPropagation();if(!d.state){c()}})}}a.prototype=F5.Prototypes.Widgets.Button;if(F5.platform()==="ios"){F5.Prototypes.Widgets._TabButton=new a()}else{F5.Prototypes.Widgets._TabButton=F5.Prototypes.Widgets.Button}function b(){function c(f){var e=[];F5.forEach(f.childNodes,function(g){if(g.getAttribute&&g.getAttribute("f5tab")){e.push(g)}});if(e.length){return e}else{var d;for(d=0;d<f.childNodes.length;d+=1){e=c(f.childNodes[d]);if(e.length){return e}}}return e}this.construct=function(f){var e=this;this.tabset=document.createElement("div");F5.addClass(this.tabset,"f5tabset");e.tabs={};F5.forEach(c(this.el),function(h){var i=h.getAttribute("f5tab");if(!f[i]){f[i]=i}var g=F5.createWidget("_TabButton",f,i);F5.addClass(g,"f5tab");e.tabset.appendChild(g);e.tabs[i]=g;g.widget.setAction(function(j){if(e.action){e.action(i)}})});var d=e.el.getAttribute("f5tabsetposition");if(d&&d==="top"){e.el.insertBefore(this.tabset,e.el.childNodes[0])}else{e.el.appendChild(this.tabset)}};this.setAction=function(d){this.action=d};this.select=function(d){var e=this;F5.Global.flowController.addWaitTask(function(f){F5.forEach(e.tabs,function(h,g){g.widget.setState(d===h);if(d===h){F5.addClass(e.tabset,h)}else{F5.removeClass(e.tabset,h)}});f()})}}F5.Prototypes.Widgets.Tabset=new b()}());</script> <script id="f5/widgets/navcontroller.js">F5.Prototypes.Widgets.NavController={updateConfiguration:function(e){while(e.selection){e=e.selection}function f(g){return g!==undefined}var c=e.id;var b={node:e};while(e&&(!f(b.left)||!f(b.right)||!f(b.title))){var a=e.view.getNavConfig();if(a){if(!f(b.title)&&f(a.title)){b.title=a.title}if(!f(b.left)&&f(a.left)){b.left=a.left;if(b.left){b.left.node=e}}if(!f(b.right)&&f(a.right)){b.right=a.right;if(b.right){b.right.node=e}}if(a.hide){b.hide=a.hide}}e=e.parent}if(!f(b.title)){b.title=c}var d=this;if(b.left&&!b.left.action){F5.assert(b.left.transition,"Nav config must specify transition or action");b.left.action=function(){var h=d.configuration.left.transition;var g=d.configuration.left.node;F5.Global.flowController.doTransition(g,h,g.data)}}if(b.right&&!b.right.action){F5.assert(b.right.transition,"Nav config must specify transition or action");b.right.action=function(){var h=d.configuration.right.transition;var g=d.configuration.right.node;F5.Global.flowController.doTransition(g,h,g.data)}}this.configuration=b}};</script> <script id="f5/widgets/streetview.js">(function(){function a(){this.construct=function(b){this.streetView=new google.maps.StreetViewPanorama(this.el,{pano:b.pano});this.closeButton=F5.createWidget("Button",b,"closeButton");F5.addClass(this.closeButton,"f5closebutton");this.el.appendChild(this.closeButton)};this.setCloseAction=function(b){F5.addTouchStartListener(this.closeButton,function(){b()})};this.widgetWillBecomeActive=function(){google.maps.event.trigger(this.streetView,"resize")}}F5.Prototypes.Widgets.StreetView=new a()}());</script> <script id="f5/widgets/distance.js">(function(){function b(h,f){function p(c){return c*Math.PI/180}var i=h.lat,g=f.lat,l=h.lng,k=f.lng;var j=6371;j/=1.609;var n=p(g-i);var e=p(k-l);i=p(i);g=p(g);var q=Math.sin(n/2)*Math.sin(n/2)+Math.sin(e/2)*Math.sin(e/2)*Math.cos(i)*Math.cos(g);var o=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));var m=j*o;return m.toFixed(1)}function a(){function c(e,d){var f=e.distanceFromCurrentLocation();if(f){e.el.innerText=f+" m"}else{e.el.innerText=""}}this.distanceFromCurrentLocation=function(){var d=F5.locationService.getCurrentLocation();if(d){return b(d,this.location)}else{return 0}};this.construct=function(e){this.location=e.location;c(this,e.location);var d=this;document.addEventListener("locationchanged",function(){c(d,e.location)})}}F5.Prototypes.Widgets.Distance=new a()}());</script> <script id="f5/widgets/menu.js">(function(){function a(){this.construct=function(c){var b=this;F5.addClass(this.el,"f5menu");var e=document.createElement("div");F5.addClass(e,"f5menutitle");e.innerHTML=c.method;this.el.appendChild(e);var d=document.createElement("div");F5.addClass(d,"f5menuitems");this.el.appendChild(d);F5.forEach(c.choices,function(h,f){var g=F5.createWidget("Button",{choice:h},"choice");F5.addClass(g,"f5menuitem");d.appendChild(g);g.widget.setAction(function(){if(b.action){b.action(h)}})})};this.setAction=function(b){this.action=b};this.present=function(){var b=this;document.getElementById("f5screen").appendChild(b.el);setTimeout(function(){b.el.style.opacity=1},0)};this.dismiss=function(){var b=this;function c(){F5.removeTouchEventListenersRecursive(b.el);F5.removeTransitionEndListener(b.el);b.el.parentElement.removeChild(b.el)}F5.addTransitionEndListener(this.el,c);b.el.style.opacity=0;if(!F5.isMobile()){setTimeout(function(){b.el.style.opacity=0.01},100)}}}F5.Prototypes.Widgets.Menu=new a()}());</script> <script id="f5/widgets/tracker.js">(function(){function a(){this.construct=function(){var c=this;var g;var b;var e;var h=this.el.getAttribute("f5constrain");function d(j){var i=F5.eventLocation(j);if(g){var k={x:h==="vertical"?0:i.x-b.x,y:h==="horizontal"?0:i.y-b.y};k.x+=e.x;k.y+=e.y;if(c.delegate&&c.delegate.moveHandler){c.delegate.moveHandler(k,e)}c.el.style["-webkit-transform"]="translate3d("+k.x+"px,"+k.y+"px, 0px)"}}function f(k){var j=F5.eventLocation(k);var l={x:h==="vertical"?0:j.x-b.x,y:h==="horizontal"?0:j.y-b.y};g=false;F5.removeTouchMoveListener(document.body,d);F5.removeTouchStopListener(document.body,f);if(c.delegate&&c.delegate.stopHandler){var i=new WebKitCSSMatrix(c.el.style.webkitTransform);c.delegate.stopHandler(l,e);if(l.x!==i.m41||l.y!==i.m42){c.animateTo(l)}}}F5.addTouchStartListener(this.el,function(j){g=true;b=F5.eventLocation(j);var i=new WebKitCSSMatrix(c.el.style.webkitTransform);e={x:i.m41,y:i.m42};c.el.style["-webkit-transition"]="";F5.addTouchMoveListener(document.body,d);F5.addTouchStopListener(document.body,f)})};this.animateTo=function(c,b){this.el.style["-webkit-transition"]="-webkit-transform .25s";this.el.style["-webkit-transform"]="translate3d("+c.x+"px,"+c.y+"px, 0px)"}}F5.Prototypes.Widgets.Tracker=new a()}());</script> <script id="f5/widgets/switch.js">(function(){function a(){this.construct=function(){F5.addClass(this.el,"f5switch");this.slider=document.createElement("div");F5.addClass(this.slider,"f5slider");this.slider.setAttribute("f5constrain","horizontal");F5.attachWidget(this.slider,"Tracker");this.left=document.createElement("div");this.left.innerText="ON";F5.addClass(this.left,"left");this.slider.appendChild(this.left);this.right=document.createElement("div");this.right.innerText="OFF";F5.addClass(this.right,"right");this.slider.appendChild(this.right);this.control=document.createElement("div");F5.addClass(this.control,"f5control");this.slider.appendChild(this.control);this.slider.widget.delegate=this;this.el.appendChild(this.slider)};this.widgetWillBecomeActive=function(){this.control.style.width=this.control.offsetHeight;this.deadZone=this.el.offsetWidth/5;var b=parseInt(window.getComputedStyle(this.slider)["padding-left"].replace("px",""),10);var c=parseInt(window.getComputedStyle(this.slider)["padding-right"].replace("px",""),10);this.maxThrow=this.el.offsetWidth-this.control.offsetWidth-(b+c);this.slider.style.width=this.el.offsetWidth*2-this.el.offsetHeight;this.slider.style["margin-left"]=-(this.el.offsetWidth-this.el.offsetHeight)};this.moveHandler=function(c,b){if(c.x>b.x||(c.x===0&&b.x===0)||c.x<0){if(c.x<this.deadZone){c.x=0}else{c.x-=this.deadZone;if(c.x>this.maxThrow){c.x=this.maxThrow}}}else{if(c.x>this.maxThrow-this.deadZone){c.x=this.maxThrow}else{c.x+=this.deadZone;if(c.x>this.maxThrow){c.x=this.maxThrow}}}};this.stopHandler=function(c,b){if(c.x>b.x||(c.x===0&&b.x===0)){if(c.x<this.deadZone||c.x>3*this.maxThrow/4){c.x=this.maxThrow}else{c.x=0}}else{if(this.maxThrow+c.x>this.maxThrow-this.deadZone||this.maxThrow+c.x<this.maxThrow/4){c.x=0}else{c.x=this.maxThrow}}}}F5.Prototypes.Widgets.Switch=new a()}());</script> <script id="f5/widgets/loader.js">(function(){function a(){this.construct=function(c){var b=F5.loadTemplate(this.el.getAttribute("f5template"));this.el.appendChild(b)}}F5.Prototypes.Widgets.Loader=new a()}());</script> <script id="f5/widgets/scroller.js">(function(){var m=40;var j=0.05;var a=500;function b(p,t,r,q){if(r){var s="cubic-bezier("+q.join(",")+")";p.el.style["-webkit-transition"]="-webkit-transform "+r+"s "+s}else{p.el.style["-webkit-transition"]=""}p.el.style["-webkit-transform"]=p.horizontal?"translate3d("+t+"px,0px,0px)":"translate3d(0px,"+t+"px,0px)"}function k(p,r,q){if(r>q){r=q}if(r<p.minOffset-q){r=p.minOffset-q}return r}function i(p){if(Math.abs(p)>this.maxVelocity){p=F5.sign(p)*this.maxVelocity}return p}function l(p,q){p.staticOffset=p.currentOffset=q;b(p,p.staticOffset)}function e(p,r){var q=F5.eventLocation(r);return{x:q.x-p.container.left,y:q.y-p.container.top}}function h(p,u){var r=0.5;var t=e(p,u);var v=p.horizontal?t.x-p.touchLoc.x:t.y-p.touchLoc.y;p.touchLoc=t;var s=u.timeStamp-p.touchTime;p.touchTime=u.timeStamp;var q=i((1-r)*p.lastVelocity+r*(v/s));p.lastVelocity=q;return q}function o(p){F5.removeTransitionEndListener(p.el);if(Math.abs(p.staticOffset)>Math.abs(k(p,p.staticOffset,0))){var r=k(p,p.staticOffset,0);var q;if(Math.abs(p.currentOffset-r)>m){q=p.curves.hardSnap}else{q=p.curves.softSnap}b(p,r,0.5,q);p.currentOffset=p.staticOffset=r}}function f(p,r){p.tracking=true;p.touchLoc=e(p,r);p.startLoc=p.touchLoc;p.touchTime=r.timeStamp;p.lastVelocity=0;var q=new WebKitCSSMatrix(window.getComputedStyle(p.el)["-webkitTransform"]);l(p,p.horizontal?q.m41:q.m42)}function d(p){var q=this.getEndVelocity()}function n(v,x){x.stopPropagation();if(!v.tracking){return}v.staticOffset=v.currentOffset;v.tracking=false;function q(z){return(F5.sign(z)===1&&v.staticOffset>m)||(F5.sign(z)===-1&&v.staticOffset<v.minOffset-m)}var s=h(v,x);if(Math.abs(s)>j&&!q(s)){s=i(s);var t=s<0?0.0005:-0.0005;var r=-(s*s)/(2*t);var y=-s/t;var w=m;var p=k(v,v.staticOffset+r,w);var u=p-v.staticOffset;y*=Math.abs(u/r);F5.removeTransitionEndListener(v.el);F5.addTransitionEndListener(v.el,function(z){o(v)});b(v,p,y/1000,v.curves.flick);v.staticOffset=p;v.currentOffset=v.staticOffset}else{o(v)}}function g(p,r){r.stopPropagation();if(!p.tracking){return}function q(y,A){var v=p.horizontal?p.container.width:p.container.height;var u=p.horizontal?v-p.startLoc.x:v-p.startLoc.y;if(F5.sign(A)<0){u=p.horizontal?-p.startLoc.x:-p.startLoc.y}if(Math.abs(A)>Math.abs(u)){A=u}var t=u;if(F5.sign(A)>0&&y+u>0){t=y+u}else{if(F5.sign(A)<0&&y+u<p.minOffset){t=y+u-p.minOffset}}var z=0;if(F5.sign(A)>0&&y+A>0){z=y+A}else{if(F5.sign(A)<0&&y+A<p.minOffset){z=y+A-p.minOffset}}if(z){var w=0.5*F5.sign(A)*Math.min(Math.abs(t),v);var x=w*F5.cubicBezierAtTime(z/t,0,0,0.5,1,2);A=A-z+x}return y+A}h(p,r);var s=p.horizontal?e(p,r).x-p.startLoc.x:e(p,r).y-p.startLoc.y;p.currentOffset=q(p.staticOffset,s);b(p,p.currentOffset)}function c(p){this.curves={easeOut:[0,0,0.58,1],flick:[0.33,0.66,0.76,1],hardSnap:[0,0.75,0.55,1],softSnap:[0.25,0.25,0.55,1]};this.maxVelocity=5;this.construct=function(){var s=this;l(this,0);this.horizontal=false;this.refreshFunction=function(){s.refresh()};function r(t){g(s,t)}function q(t){if(!F5.isMobile()){F5.removeTouchStopListener(document.body,q);F5.removeTouchMoveListener(document.body,r)}F5.removeTouchStopListener(s.el,q);F5.removeTouchMoveListener(s.el,r);n(s,t)}F5.addTouchStartListener(this.el,function(t){f(s,t);if(!F5.isMobile()){F5.addTouchStopListener(document.body,q);F5.addTouchMoveListener(document.body,r)}F5.addTouchStopListener(s.el,q);F5.addTouchMoveListener(s.el,r)});b(this,this.staticOffset)};this.widgetWillBecomeActive=function(){if(!this.initialized){this.refresh();this.initialized=true}};this.widgetDidBecomeActive=function(){window.addEventListener("orientationchange",this.refreshFunction);this.active=true};this.widgetWillBecomeInactive=function(){this.tracking=false;o(this);window.removeEventListener("orientationchange",this.refreshFunction)};this.widgetDidBecomeInactive=function(){this.active=false};this.refresh=function(){this.container=F5.elementOffsetGeometry(this.el.parentElement);this.minOffset=Math.min(this.container.height-this.el.offsetHeight,0);this.staticOffset=0;b(this,0);this.initialized=false}}F5.Prototypes.Widgets.Scroller=new c()}());</script> <script id="f5/widgets/input.js">(function(){function a(){this.construct=function(c){var d=this.el.getAttribute("f5id");this.label=document.createElement("div");this.label.innerText=F5.valueFromId(c,d);F5.addClass(this.label,"label");this.el.appendChild(this.label);this.input=document.createElement("input");this.input.name=d;this.input.setAttribute("readonly","readonly");this.input.type=d.match("password")?"password":"text";var b=this;this.input.onkeypress=function(){b.label.style.display="none"};this.el.appendChild(this.input)};this.reset=function(){this.input.value="";this.label.style.display=""}}F5.Prototypes.Widgets.Input=new a()}());</script> <script id="f5/widgets/form.js">(function(){function a(){this.construct=function(){var c=this;function b(){F5.forEach(c.el.querySelectorAll("[f5widget=Input]"),function(d){d.widget.input.removeAttribute("readonly")})}F5.forEach(this.el.querySelectorAll("[f5widget=Input]"),function(d){F5.addTouchStartListener(d,function(f){b();d.widget.input.focus()})})};this.getFormData=function(){var b={};F5.forEach(this.el.querySelectorAll("input"),function(c){b[c.getAttribute("name")]=c.value});return b};this.reset=function(){F5.forEach(this.el.querySelectorAll("[f5widget=Input]"),function(b){b.widget.reset()})};this.widgetWillBecomeActive=function(){this.reset()};this.widgetWillBecomeInactive=function(){F5.forEach(this.el.querySelectorAll("input"),function(b){b.blur()})}}F5.Prototypes.Widgets.Form=new a()}());</script> <script id="f5/widgets/activity.js">(function(){function a(){this.construct=function(){F5.addClass(this.el,"f5activityspritecontainer");var b=document.createElement("div");F5.addClass(b,"f5activityspritemask");this.el.appendChild(b);var c=document.createElement("div");F5.addClass(c,"f5activitysprite");b.appendChild(c)}}F5.Prototypes.Widgets.Activity=new a()}());</script> <script id="f5/widgets/alert.js">(function(){function a(){this.construct=function(e){var c=this;F5.addClass(this.el,"f5alert");var d=document.createElement("div");F5.addClass(d,"f5alertcontainer");c.el.appendChild(d);var b=document.createElement("div");F5.addClass(b,"f5alerttitle");b.innerHTML=e.title;d.appendChild(b);var g=document.createElement("div");F5.addClass(g,"f5alertmessage");g.innerHTML=e.message;d.appendChild(g);var f=F5.createWidget("Button",{label:"OK"},"label");F5.addClass(f,"f5alertok");d.appendChild(f);f.widget.setAction(function(){c.dismiss()})};this.setAction=function(b){this.action=b};this.present=function(c){var b=this;document.getElementById("f5screen").appendChild(b.el);setTimeout(function(){b.el.style.opacity=0.95},0)};this.dismiss=function(){var b=this;function c(){F5.removeTouchEventListenersRecursive(b.el);F5.removeTransitionEndListener(b.el);b.el.parentElement.removeChild(b.el)}F5.addTransitionEndListener(this.el,c);b.el.style.opacity=0;if(!F5.isMobile()){setTimeout(function(){b.el.style.opacity=0.01},100)}}}F5.Prototypes.Widgets.Alert=new a()}());</script> <script id="f5/3p/bezier.js">F5.cubicBezierAtTime=function(o,c,b,k,j,a){var n=0,r=0,e=0,l=0,p=0,d=0;function i(s){return((n*s+r)*s+e)*s}function h(s){return((l*s+p)*s+d)*s}function q(s){return(3*n*s+2*r)*s+e}function m(s){return 1/(200*s)}function g(A,B){var z,y,w,t,s,v;function u(x){if(x>=0){return x}else{return -x}}for(w=A,v=0;v<8;v+=1){t=i(w)-A;if(u(t)<B){return w}s=q(w);if(u(s)<0.000001){break}w=w-t/s}z=0;y=1;w=A;if(w<z){return z}if(w>y){return y}while(z<y){t=i(w);if(u(t-A)<B){return w}if(A>t){z=w}else{y=w}w=(y-z)*0.5+z}return w}function f(s,t){return h(g(s,t))}e=3*c;r=3*(k-c)-e;n=1-e-r;d=3*b;p=3*(j-b)-d;l=1-d-p;return f(o,m(a))};</script> <script id="f5/facebook_web.js">(function(){window.fbAsyncInit=function(){console.log("hi there facebook")};var d="facebook-jssdk";if(!document.getElementById(d)){var c=document.createElement("div");c.id="fb-root";document.body.appendChild(c);var e=document.createElement("script");e.id=d;e.async=true;e.src="//connect.facebook.net/en_US/all.js";document.head.appendChild(e)}F5.Global.flowController.addWaitTask(function(f){FB.init({appId:F5.facebook_appid,status:true,cookie:true,xfbml:true});f()});function b(f){FB.login(function(g){if(g.authResponse){f(g.authResponse.accessToken)}else{console.log("User cancelled login or did not fully authorize.")}},{scope:"email"})}function a(f){FB.logout();f()}F5.facebook={login:b,logout:a}}());</script> <script id="f5/nobridge.js">F5.flushTasks=function(b,a){F5.parallelizeTasks(b,a)};</script> <script id="f5/widgets/navbar_web.js">(function(){function a(){var g;var h={};var e={};var f={};this.construct=function(l){var k=this;g=document.createElement("div");F5.addClass(g,"f5navbar");this.el.appendChild(g);f.title=document.createElement("div");F5.addClass(f.title,"f5titlecontainer");g.appendChild(f.title);f.left=document.createElement("div");g.appendChild(f.left);f.right=document.createElement("div");g.appendChild(f.right);function j(o){e[o]={a:{},b:{}};function n(q){var p=document.createElement("div");p.setAttribute("f5id",q);F5.attachWidget(p,"Button",l);F5.addClass(p,"f5"+q+"button");p.style.opacity=0;p.widget.setAction(function(){k.configuration[q].action()});f[q].appendChild(p);return p}e[o].a=n(o);e[o].b=n(o);e[o].active=e[o].a;e[o].inactive=e[o].b}j("left");j("right");function m(){var n=document.createElement("div");F5.addClass(n,"f5title");f.title.appendChild(n);return n}h.a=m();h.b=m();h.active=h.a;F5.Global.flowController.addFlowObserver(this)};function d(j){return j.active===j.a?j.b:j.a}function i(k,j){if(typeof k===typeof j){if(typeof k==="object"){if(k.constructor!==Object){return k!==j}else{var l=true;F5.forEach(k,function(n,m){if(l&&n!=="action"){if(n==="node"){l=k.node===j.node}else{l=!i(m,j[n])}}});return !l}}else{return k!==j}}else{return true}}function b(){var k=this;e.left.inactive=d(e.left);e.right.inactive=d(e.right);function j(p){var n;if(e[p].active){n=e[p].active.widget.getData()}var m;if(k.configuration[p]){m=k.configuration[p]}if((!n&&m)||(n&&i(n[p],m))){if(m){var o={};o[p]=m;e[p].inactive.widget.reset();e[p].inactive.widget.construct(o)}else{e[p].inactive=null}e[p].doAnimate=true}else{e[p].doAnimate=false}}if(this.configuration.hide){e.left.inactive.style["pointer-events"]="";e.right.inactive.style["pointer-events"]=""}else{var l;if(h.active){l=h.active.innerText}if(l!==this.configuration.title){h.doAnimate=true;h.inactive=d(h);h.inactive.innerText=this.configuration.title}j("left");j("right")}}function c(l){var k=this;function m(o){var n=o.inactive;o.inactive=o.active;o.active=n}function j(o){var n=e[o];if(n.doAnimate){if(n.inactive){n.inactive.style["-webkit-transition"]="opacity .25s";n.inactive.style.opacity=1;n.inactive.style["pointer-events"]=""}if(n.active){n.active.style["-webkit-transition"]="opacity .25s";n.active.style.opacity=0;n.active.style["pointer-events"]="none"}m(e[o]);n.doAnimate=false}}j("left");j("right");if(k.configuration.hide){g.style.opacity=0;g.style["pointer-events"]="none"}else{g.style.opacity=1;g.style["pointer-events"]=""}if(h.doAnimate){if(h.inactive){h.inactive.style["-webkit-transition"]="opacity .25s";h.inactive.style.opacity=1}if(h.active){h.active.style["-webkit-transition"]="opacity .25s";h.active.style.opacity=0}m(h);h.doAnimate=false}}this.start=function(){this.updateConfiguration(F5.Global.flow.root);b.apply(this)};this.doSelection=function(k,l){this.updateConfiguration(k.children[l]);b.apply(this);var j=this;return function(m){c.apply(j,["fade"]);m()}};this.doTransition=function(j,o,n,m,l){this.updateConfiguration(m);b.apply(this);var k=this;return function(p){setTimeout(function(){c.apply(k,[l])},0);p()}};this.startSubflow=function(){this.updateConfiguration(F5.Global.flow.root);b.apply(this)};this.syncSelection=function(j){this.updateConfiguration(j);b.apply(this)};this.completeSubflow=function(){this.updateConfiguration(F5.Global.flow.root);b.apply(this)}}a.prototype=F5.Prototypes.Widgets.NavController;F5.Prototypes.Widgets.NavBar=new a()}());</script> <script id="f5/widgets/mapview_web.js">(function(){function a(){this.construct=function(){var d=F5.locationService.getCurrentLocation();var b={zoom:13,center:new google.maps.LatLng(d.lat,d.lng),mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false,mapTypeControl:false};this.map=new google.maps.Map(this.el,b);this.markers=[];var c=this;google.maps.event.addListener(this.map,"bounds_changed",function(){if(c.boundsChangedAction){c.boundsChangedAction()}})};this.removePins=function(){this.markers.forEach(function(b){b.setMap(null)})};this.dropPins=function(c){var b=this;this.markers.forEach(function(d){d.setMap(null)});c.forEach(function(f){var d=new google.maps.LatLng(f.lat,f.lng);var g;if(f.markerImage){g=new google.maps.MarkerImage(f.markerImage,null,null,null,new google.maps.Size(24,24))}var e=new google.maps.Marker({position:d,map:b.map,optimized:false,animation:google.maps.Animation.DROP,icon:g});b.markers.push(e);google.maps.event.addListener(e,"click",function(){var j=document.createElement("div");j.className="map-callout";var h=document.createElement("div");h.innerText=f.name;j.appendChild(h);var i=document.createElement("div");i.innerText="Street View";j.appendChild(i);F5.addTapListener(h,function(){b.calloutActions.detailView(f.index)});F5.addTapListener(i,function(){b.calloutActions.streetView(f.index)});var k=new google.maps.InfoWindow({content:j});k.open(b.map,e)})})};this.setMaskRegion=function(b){};this.getMapGeometry=function(){var d=this.map.getBounds();var b=this.map.getCenter();var e=new google.maps.LatLng(d.getSouthWest().lat(),d.getNorthEast().lng());var c=google.maps.geometry.spherical.computeDistanceBetween(d.getSouthWest(),e);return{center:{lat:b.lat(),lng:b.lng()},radius:0.5*c}};this.animateToRegion=function(j,f){function i(e){return e*Math.PI/180}function c(e){return e*180/Math.PI}function b(r,e,n,t){t=t/6371;n=i(n);var s=i(r),p=i(e);var q=Math.asin(Math.sin(s)*Math.cos(t)+Math.cos(s)*Math.sin(t)*Math.cos(n));var o=p+Math.atan2(Math.sin(n)*Math.sin(t)*Math.cos(s),Math.cos(t)-Math.sin(s)*Math.sin(q));o=(o+3*Math.PI)%(2*Math.PI)-Math.PI;return{lat:c(q),lng:c(o)}}var d=b(j.center.lat,j.center.lng,0,j.radius/1000);var m=b(j.center.lat,j.center.lng,180,j.radius/1000);var h=b(j.center.lat,j.center.lng,90,j.radius/1000);var l=b(j.center.lat,j.center.lng,270,j.radius/1000);var k=new google.maps.LatLng(m.lat,l.lng);var g=new google.maps.LatLng(d.lat,h.lng);this.map.fitBounds(new google.maps.LatLngBounds(k,g));setTimeout(f,0)};this.setCalloutActions=function(b){this.calloutActions=b};this.setBoundsChangedAction=function(b){this.boundsChangedAction=b};this.setMaskRegion=F5.noop;this.clearMaskRegion=F5.noop}F5.Prototypes.Widgets.MapView=new a()}());</script> <script id="apps/gmdemo/viewdelegates.js">(function(){function a(){this.initialize=function(){this.el.appendChild(F5.loadTemplate(this.node));var b=F5.getElementById(this.el,"loginButton");var c=this;b.widget.setAction(function(){F5.facebook.login(function(d){F5.Global.flowController.doTransition(c.node,"home")})})}}F5.Prototypes.ViewDelegates.login=new a()}());</script> <script id="apps/gmdemo/flowdelegates.js">(function(){function a(){this.isLoggedIn=function(b){b("no")}}}());</script> <script id="f5/start.js">(function(){if(F5.isMobile()){F5.addClass(document.body,"f5mobile");F5.imageServerHost="http://www.flow5.com/"}else{F5.imageServerHost=""}document.body.addEventListener("mousedown",function(f){f.preventDefault()});document.body.addEventListener("touchmove",function(f){f.preventDefault()});document.body.addEventListener("click",function(f){f.preventDefault()});function d(){setTimeout(function(){window.scrollTo(0,1)},0)}window.addEventListener("load",d,false);window.addEventListener("touchstart",d,false);F5.setupScreenGeometry(F5.isMobile(),F5.isNative());var a,c;if(F5.isNative()){a="deviceready";c=document}else{a="load";c=window}shouldRotateToOrientation=function(){};c.addEventListener(a,function b(g){function f(){try{F5.Global.flowController.start(function(){console.log("started");setTimeout(function(){if(typeof PhoneGap!=="undefined"){console.log("hiding splash: "+F5.platform());if(F5.platform()==="android"){setTimeout(function(){PhoneGap.exec(null,null,"App","hideSplashScreen",[false])},500)}else{PhoneGap.exec(function(j){console.log(j)},function(j){console.log(j)},"com.phonegap.splashscreen","hide",[])}}},0)})}catch(e){console.log(e.message);document.body.className="errorframe";document.body.innerHTML=e.message}}function i(){setTimeout(f,0)}function h(){console.log("updateready");window.location.reload()}window.applicationCache.addEventListener("updateready",function(j){h()},false);if(window.applicationCache.status===window.applicationCache.UPDATEREADY){h()}if(window.applicationCache.status===window.applicationCache.IDLE||window.applicationCache.status===window.applicationCache.UNCACHED){i()}else{window.applicationCache.addEventListener("noupdate",function(j){console.log("noupdate");i()},false);window.applicationCache.addEventListener("cached",function(j){console.log("cached");i()},false);window.applicationCache.addEventListener("error",function(j){console.log("error");i()},false)}},false)}());</script> </div> <div id="f5appframe"> <div id="f5screen"></div> </div> </body> </html>